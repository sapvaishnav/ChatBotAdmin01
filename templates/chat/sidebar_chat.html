{% extends 'layouts/base.html' %}

{% block title %} Sidebar Chat Window {% endblock title %}

{% block content %}

<div class="header bg-primary pb-6">
  <div class="container-fluid">
    <div class="header-body">
      <div class="row align-items-center py-4">
        <div class="col-lg-6 col-7">
          <h6 class="h2 text-white d-inline-block mb-0">Sidebar Chat</h6>
          <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
            <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
              <li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
              <li class="breadcrumb-item active" aria-current="page">Sidebar Chat</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Page content -->
<div class="container-fluid mt--6">
  <div class="row">
    <div class="col-lg-9">
      <div class="card">
        <div class="card-header border-0">
          <h3 class="mb-0">Main Content</h3>
        </div>
        <div class="card-body">
          <img src="https://via.placeholder.com/600x250" alt="Dummy Image" class="img-fluid mb-4">

          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin scelerisque, justo ut varius dictum, elit odio posuere augue, non accumsan sapien velit ut libero. Fusce convallis eros a metus convallis, non tempus arcu aliquam.</p>

          <p>Vivamus luctus, est sed scelerisque lacinia, purus nisl fermentum justo, vitae vestibulum eros magna non dui. Sed at turpis in eros facilisis efficitur. Suspendisse potenti. Integer dictum urna vel nisi tristique, ac lobortis sapien feugiat.</p>

          <p>Aenean tincidunt libero id urna vehicula, ut venenatis tortor vulputate. Pellentesque non magna et quam cursus suscipit. Nulla facilisi. Praesent vulputate sem vitae dolor luctus, quis ornare lacus dapibus. Aliquam scelerisque risus sit amet vestibulum dictum.</p>

          <p>Curabitur eget magna eu nisi convallis sodales. Sed vel sem nec odio egestas laoreet. Nam malesuada libero a augue sodales, nec finibus ex facilisis. In hac habitasse platea dictumst. Nullam tristique pharetra nunc at malesuada.</p>
        </div>
      </div>
    </div>

    <!-- Chat Window on the right side -->
    <div class="col-lg-3">
      <div class="card">
        <!-- Chat Window -->
        <div class="card-header border-0">
          <h3 class="mb-0">Chat Window</h3>
        </div>
        <div class="card-body">
          <div id="chat-window" class="border p-3" style="height: 300px; overflow-y: auto;">
            <div id="chat-messages" class="d-flex flex-column"></div>
          </div>
          <div class="input-group mt-3">
            <input type="text" id="user-message" class="form-control" placeholder="Type your message..." aria-label="User message">
            <div class="input-group-append">
              <button class="btn btn-primary" type="button" onclick="sendMessage()">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  {% include "includes/footer.html" %}
</div>

{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}
<script>
  function sendMessage() {
    const userMessage = document.getElementById('user-message').value;
    const chatMessages = document.getElementById('chat-messages');

    // Display the user's message in the chat window
    const userMessageElement = document.createElement('div');
    userMessageElement.className = 'user-message text-right';
    userMessageElement.textContent = `User: ${userMessage}`;
    chatMessages.appendChild(userMessageElement);

    // Clear the input field
    document.getElementById('user-message').value = '';

    // Simulate a bot response
    setTimeout(() => {
      const botMessageElement = document.createElement('div');
      botMessageElement.className = 'bot-message text-left';
      botMessageElement.textContent = `Bot: This is a simulated response to "${userMessage}"`;
      chatMessages.appendChild(botMessageElement);

      // Scroll to the bottom of the chat window
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }, 1000);
  }
</script>

<style>
  .user-message {
    background-color: #007bff;
    color: white;
    padding: 8px;
    border-radius: 8px;
    margin: 5px;
    max-width: 70%;
    font-size: 12px;
    align-self: flex-end; /* Align user messages to the right */
  }

  .bot-message {
    background-color: #e9ecef;
    color: black;
    padding: 8px;
    border-radius: 8px;
    margin: 5px;
    max-width: 70%;
    font-size: 12px;
    align-self: flex-start; /* Align bot messages to the left */
  }

  #chat-window {
    font-size: 12px;
  }
</style>

{% endblock javascripts %}
